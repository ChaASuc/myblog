webpackJsonp([3],{"273Y":function(t,e){},"2Vv1":function(t,e,i){"use strict";var s={props:["list"],mounted:function(){this.getData()},data:function(){return{articleType:"",itemList:[],commentsList:[]}},methods:{getArticle:function(t){var e=this.$router.resolve({path:"/article",query:{aid:t}});window.open(e.href,"_blank")},getCommentsList:function(){},getData:function(){this.list&&(this.articleType=this.list.articleType,this.itemList=this.list.list)}},watch:{list:function(t,e){this.articleType=this.list.articleType,this.itemList=t.list}}},a={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"article"},[i("div",{staticClass:"article-header"},[i("span",[t._v(t._s(t.articleType))])]),t._v(" "),i("div",{staticClass:"article-list"},[i("ul",t._l(t.itemList,function(e){return i("li",{key:e.articleId,on:{click:function(i){return t.getArticle(e.articleId)}}},[i("div",{staticClass:"title",attrs:{title:e.articleTitle},domProps:{textContent:t._s(e.articleTitle)}}),t._v(" "),i("div",{staticClass:"meta-box"},[i("p",[i("span",{staticClass:"iconfont"},[t._v("")]),i("span",{staticClass:"num-item",domProps:{textContent:t._s(e.thumbupCount)}})]),t._v(" "),i("p",[i("span",{staticClass:"iconfont"},[t._v("")]),i("span",{staticClass:"num-item",domProps:{textContent:t._s(e.commentCount)}})]),t._v(" "),i("p",[i("span",{staticClass:"iconfont"},[t._v("")]),i("span",{staticClass:"num-item",domProps:{textContent:t._s(e.visitCount)}})])]),t._v(" "),i("div",{staticClass:"clear-fix"})])}),0)])])},staticRenderFns:[]};var n=i("VU/8")(s,a,!1,function(t){i("lXXX")},"data-v-59585d7c",null);e.a=n.exports},"9yDs":function(t,e){},"G3D/":function(t,e){},lXXX:function(t,e){},rdXJ:function(t,e){},tLJp:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("mvHQ"),a=i.n(s),n=i("2Vv1"),o=i("Gu7T"),l=i.n(o),r=i("pFYg"),c=i.n(r),m=i("woOf"),d=i.n(m),v=function(t){var e=d()({},{linkClass:"cl-link",linkActiveClass:"cl-link-active",datasetName:"data-cata-target",selector:["h1","h2","h3","h4","h5","h6"],activeHook:null},t),i=document.getElementById(e.contentEl);if(!i.innerHTML)var s=setInterval(function(){(i=document.getElementById(e.contentEl)).innerHTML&&(clearInterval(s),function(){a=document.getElementById(e.catalogEl),n=i.querySelectorAll(e.selector.join()),o=function(t){for(var e=void 0,i=void 0,s=[],a={},n={id:-1},o=null,l=void 0,r=0;r<t.length;r++)e=t[r].innerText||t[r].textContent,i=t[r].tagName,l="heading-"+r,t[r].id=l,a={name:e,tagName:i,id:l,level:+u(i),parent:n},o&&(u(a.tagName)>u(o.tagName)?a.parent=o:a.parent=v(a,o)),o=a,s.push(a);return s}(n);try{a.innerHTML="<div class='cl-wrapper'>"+function t(i,s){var a=void 0,n=!1;if(i){a="<ul>";for(var o=0;o<i.length;o++)l=i[o].parent,r=s,l&&r&&"object"===(void 0===l?"undefined":c()(l))&&"object"===(void 0===r?"undefined":c()(r))&&l.id===r.id&&(n=!0,a+="<li><div title= '"+i[o].name+"' class='"+e.linkClass+" cl-level-"+i[o].level+"'  "+e.datasetName+"='"+i[o].id+"'>"+i[o].name+"</div>",a+=t(i,i[o]),a+="</li>");a+="</ul>"}var l,r;return n?a:""}(o,{id:-1})+"</div>"}catch(t){console.error("error in catalog",t)}a.addEventListener("click",m),window.addEventListener("scroll",(t=r,s=50,l=Date.now(),function(){var e=Date.now();e-l>s&&(t(),l=Date.now())}));var t,s,l}())},10);var a=null,n=null,o=null;function r(t){var e=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop;e>850?a.parentNode.classList.add("article-nav-fix"):a.parentNode.classList.remove("article-nav-fix");for(var i=null,s=n.length-1;s>=0;s--)if(n[s].offsetTop<=e){i=n[s];break}h(i?i.id:null)}function m(t){var i=t.target,s=i.getAttribute(e.datasetName);i.classList.contains(e.linkClass)&&window.scrollTo(0,document.getElementById(s).offsetTop+10)}function v(t,e){for(var i=e.parent;i&&u(t.tagName)<=u(i.tagName);)i=i.parent;return i||{id:-1}}function u(t){return t?t.slice(1):0}function h(t){var i=this;[].concat(l()(a.querySelectorAll("["+e.datasetName+"]"))).forEach(function(s){s.getAttribute(e.datasetName)===t?("function"==typeof e.activeHook&&!s.classList.contains(e.linkActiveClass)&&e.activeHook.call(i,s),s.classList.add(e.linkActiveClass)):s.classList.remove(e.linkActiveClass)})}},u={props:["article"],components:{"article-hot":n.a,"article-new":n.a},created:function(){this.getArticleNewList(),this.getArticleHotList()},mounted:function(){new v({contentEl:"article-content",catalogEl:"article-nav",selector:["h1","h2","h3"]}),new ClipboardJS("#btn-share")},watch:{article:function(t,e){this.article=t,this.flag||(this.flag=!0,this.handleThumbup())}},data:function(){return{articleNewList:null,articleHotList:null,isLiked:!1,flag:!1,iconfontColor:"iconfontColor",shareModalVisible:!1,shareLink:""}},methods:{getArticleHotList:function(){var t=this;this.articleHotList=JSON.parse(sessionStorage.getItem("hotList")||"[]"),this.articleHotList.list||this.axios.get("/author/articleDto?states=1&sort=1").then(function(e){0==e.data.code&&(t.articleHotList={articleType:"热门文章",list:e.data.data.list},sessionStorage.setItem("hotList",a()(t.articleHotList)))})},getArticleNewList:function(){var t=this;this.articleNewList=JSON.parse(sessionStorage.getItem("newList")||"[]"),this.articleNewList.list||this.axios.get("/author/articleDto?states=1&sort=2").then(function(e){0==e.data.code&&(t.articleNewList={articleType:"最新文章",list:e.data.data.list},sessionStorage.setItem("newList",a()(t.articleNewList)))})},handleThumbupCount:function(t){this.isLiked?this.article.thumbupCount--:this.article.thumbupCount++,this.isLiked=!this.isLiked,this.axios.post("/user/thumbup/"+t+"?ip="+this.$ip).then(function(t){})},handleCommentClick:function(){var t=document.getElementById("comments-list").offsetTop;window.scrollTo(0,t+30)},handleThumbup:function(){var t=JSON.parse(localStorage.getItem("list")||"[]");console.log(t),console.log(this.article);for(var e=0;e<t.length;e++)this.article.articleId==t[e].articleId&&(this.article.thumbupCount=t[e].thumbupCount,this.isLiked=t[e].isLiked)},shareArticle:function(t,e){this.shareLink=e+"："+this.home+"article?aid="+t,this.shareModalVisible=!0}}},h={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"article-meta"},[i("div",{staticClass:"meta",on:{click:function(e){return t.handleThumbupCount(t.article.articleId)}}},[i("span",{staticClass:"iconfont",class:t.isLiked?t.iconfontColor:""},[t._v("")]),t._v(" "),i("span",{staticClass:"badge"},[t._v(t._s(t.article.thumbupCount))])]),t._v(" "),i("div",{staticClass:"meta",on:{click:t.handleCommentClick}},[i("span",{staticClass:"iconfont"},[t._v("")]),t._v(" "),i("span",{staticClass:"badge"},[t._v(t._s(t.article.commentCount))])]),t._v(" "),i("div",{staticClass:"meta"},[i("span",{staticClass:"iconfont"},[t._v("")]),t._v(" "),i("span",{staticClass:"badge"},[t._v(t._s(t.article.visitCount))])]),t._v(" "),i("div",{staticClass:"meta",on:{click:function(e){return e.stopPropagation(),t.shareArticle(t.article.articleId,t.article.articleTitle)}}},[i("span",{staticClass:"iconfont"},[t._v("")])]),t._v(" "),i("a-modal",{attrs:{title:"文章分享",footer:null},model:{value:t.shareModalVisible,callback:function(e){t.shareModalVisible=e},expression:"shareModalVisible"}},[i("a-input",{attrs:{value:t.shareLink,id:"link",spellcheck:"false"}},[i("a-icon",{staticStyle:{cursor:"pointer"},attrs:{slot:"addonAfter",type:"copy",id:"btn-share","data-clipboard-target":"#link",title:"copy"},slot:"addonAfter"})],1)],1)],1),t._v(" "),i("div",{staticClass:"article-info"},[t._m(0),t._v(" "),i("div",{staticClass:"author-info"},[i("h1",[t._v("Darcy")]),t._v(" "),i("p",[i("span",[t._v(t._s(t.moment(t.article.updateTime).format("YYYY-MM-DD"))+" 发表")])])])]),t._v(" "),i("div",{staticClass:"clear-fix"}),t._v(" "),i("h1",{staticClass:"article-title",domProps:{textContent:t._s(t.article.articleTitle)}}),t._v(" "),i("div",{staticClass:"article-content markdown-body",attrs:{id:"article-content"},domProps:{innerHTML:t._s(t.article.articleHtml)}}),t._v(" "),i("div",{staticClass:"side-bar"},[i("article-new",{attrs:{list:t.articleNewList}}),t._v(" "),i("article-hot",{attrs:{list:t.articleHotList}}),t._v(" "),t._m(1)],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"author-img"},[e("img",{attrs:{src:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1558847245158&di=7d375f370cd1fa2eab45a3b59b0baa1c&imgtype=0&src=http%3A%2F%2Flkker-10041312.file.myqcloud.com%2FImages%2F201902%2FgVaG15512595824319.jpg",alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"article-nav"},[e("h3",[e("span",[this._v("目录")])]),this._v(" "),e("div",{attrs:{id:"article-nav"}})])}]};var p={data:function(){return{nickName:"",email:"",commentsContent:"",articleId:this.id}},methods:{postComment:function(){var t=this;if(""!=this.nickName.trim())if(!this.email||this.Utils.checkEmail(this.email)){var e={articleId:this.$store.state.articleId,email:this.email,reviewContent:this.Utils.html_encode(this.commentsContent),userName:this.Utils.html_encode(this.nickName)};this.axios.post("/user/review",e).then(function(i){0==i.data.code&&(t.$message.success("发表成功"),t.commentsContent="",sessionStorage.setItem("user",a()(e)),t.$emit("getComments"))})}else this.$message.error("邮箱格式不正确");else this.$message.error("昵称不能为空")}}},f={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"post"},[i("div",{staticClass:"box"},[t._m(0),t._v(" "),i("div",{staticClass:"input-group"},[i("label",{attrs:{for:"nickName"}},[t._v("昵称：")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.nickName,expression:"nickName"}],attrs:{type:"text",placeholder:"必填",id:"nickName"},domProps:{value:t.nickName},on:{input:function(e){e.target.composing||(t.nickName=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"input-group"},[i("label",{attrs:{for:"email"}},[t._v("邮箱：")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{type:"text",placeholder:"可填，保密",id:"email",spellcheck:"false"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"clear-fix"}),t._v(" "),i("div",{staticClass:"textarea-group"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.commentsContent,expression:"commentsContent"}],staticClass:"textarea",attrs:{name:"message",id:"message",placeholder:"内容"},domProps:{value:t.commentsContent},on:{input:function(e){e.target.composing||(t.commentsContent=e.target.value)}}})]),t._v(" "),i("button",{staticClass:"btn",on:{click:t.postComment}},[t._v("确认提交")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"post-message"},[e("p",[e("span",{staticClass:"iconfont"},[this._v("")]),this._v(" "),e("span",[this._v("发表评论")])])])}]};var _={props:["commentsList"],watch:{commentsList:function(t,e){this.commentsList=t}},mounted:function(){this.handleCommentClick()},data:function(){return{reviewId:"",commentsName:"",reviewModalVisiable:!1,reviewContent:"",nickName:"",email:"",articleId:"",isClickComment:!1}},methods:{handleCommentClick:function(){0!=(sessionStorage.getItem("isClickComment")||0)&&setTimeout(function(){var t=document.getElementById("comments-list").offsetTop;window.scrollTo(0,t+30)},500),sessionStorage.setItem("isClickComment",0)},showReviewModal:function(t,e){this.reviewId=t,this.commentsName=this.Utils.html_decode(e),this.reviewModalVisiable=!0;var i=JSON.parse(sessionStorage.getItem("user")||"[]");i.userName&&(this.nickName=this.Utils.html_decode(i.userName))},review:function(){var t=this;if(""!=this.nickName.trim()){if(""==this.reviewContent.trim())this.$message.error("回复内容不能空");else if(this.email&&!this.Utils.checkEmail(this.email))return void this.$message.error("邮箱格式不正确");var e={articleId:this.$store.state.articleId,reviewParent:this.reviewId,email:this.email,reviewContent:this.Utils.html_encode(this.reviewContent),userName:this.Utils.html_encode(this.nickName)};this.axios.post("/user/review",e).then(function(i){0==i.data.code&&(t.$message.success("回复成功"),t.$emit("getComments"),t.reviewModalVisiable=!1,t.reviewContent="",sessionStorage.setItem("user",a()(e)))})}else this.$message.error("昵称不能为空")}}},C={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"comments-list",attrs:{id:"comments-list"}},[t.commentsList.length?i("h1",[t._v("评论列表")]):i("h1",[t._v("暂无评论")]),t._v(" "),t._l(t.commentsList,function(e){return i("a-comment",{key:e.reviewId},[i("span",{attrs:{slot:"author"},slot:"author"},[i("span",[t._v(t._s(t.Utils.html_decode(e.userName)))])]),t._v(" "),i("span",{attrs:{slot:"datetime"},slot:"datetime"},[t._v(t._s(t.moment(e.updateTime).fromNow()))]),t._v(" "),i("a-avatar",{attrs:{slot:"avatar",src:e.imageUrl,alt:"item.userName"},slot:"avatar"}),t._v(" "),i("p",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(t.Utils.html_decode(e.reviewContent)))]),t._v(" "),i("span",{attrs:{slot:"actions"},on:{click:function(i){return t.showReviewModal(e.reviewId,e.userName)}},slot:"actions"},[t._v("回复")]),t._v(" "),t._l(e.reviewDtos,function(e){return i("a-comment",{key:e.reviewId},[i("span",{attrs:{slot:"author"},slot:"author"},[i("span",[t._v(t._s(t.Utils.html_decode(e.userName)))])]),t._v(" "),i("span",{attrs:{slot:"datetime"},slot:"datetime"},[t._v(t._s(t.moment(e.updateTime).fromNow()))]),t._v(" "),i("a-avatar",{attrs:{slot:"avatar",src:e.imageUrl,alt:"Han Solo"},slot:"avatar"}),t._v(" "),i("p",{staticClass:"comment-content",attrs:{slot:"content"},slot:"content"},[i("span",[t._v("回复 ")]),t._v(" "),i("span",{staticStyle:{color:"#45A7D4"}},[t._v(t._s(t.Utils.html_decode(e.replierName)))]),t._v(" "),i("span",{attrs:{classs:"reply-content"}},[t._v("："+t._s(t.Utils.html_decode(e.reviewContent))+" ")])]),t._v(" "),i("span",{attrs:{slot:"actions"},on:{click:function(i){return t.showReviewModal(e.reviewId,e.userName)}},slot:"actions"},[t._v("回复")])],1)})],2)}),t._v(" "),i("a-modal",{staticClass:"review",attrs:{title:"评论回复",cancelText:"取消",okText:"确认"},on:{ok:t.review},model:{value:t.reviewModalVisiable,callback:function(e){t.reviewModalVisiable=e},expression:"reviewModalVisiable"}},[i("a-input",{attrs:{placeholder:"昵称",spellcheck:"false"},model:{value:t.nickName,callback:function(e){t.nickName=e},expression:"nickName"}}),t._v(" "),i("a-input",{staticStyle:{margin:"15px 0"},attrs:{placeholder:"邮箱(选填)",spellcheck:"false"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),t._v(" "),i("a-textarea",{attrs:{placeholder:"回复"+t.commentsName,rows:3,spellcheck:"false"},model:{value:t.reviewContent,callback:function(e){t.reviewContent=e},expression:"reviewContent"}})],1)],2)},staticRenderFns:[]};var g={components:{ArticleContent:i("VU/8")(u,h,!1,function(t){i("273Y")},"data-v-0cdf646d",null).exports,PostComments:i("VU/8")(p,f,!1,function(t){i("G3D/")},"data-v-6ca442a8",null).exports,CommentsList:i("VU/8")(_,C,!1,function(t){i("rdXJ")},"data-v-2c87b286",null).exports},created:function(){this.getArticleById(),this.getComments()},data:function(){return{articltContent:"",articleId:"",article:{},commentsList:[]}},methods:{getArticleById:function(){var t=this;this.articleId=this.$route.query.aid,this.$store.commit("setArticleId",this.articleId),this.axios("/user/article/"+this.articleId+"?ip="+this.$ip).then(function(e){var i=e.data;0==i.code&&(t.article=i.data)})},getComments:function(){var t=this;this.axios.get("/user/review?articleId="+this.articleId+"&sort=1").then(function(e){0==e.data.code&&(t.commentsList=e.data.data)})}}},w={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[e("div",{staticClass:"article-box"},[e("div",{staticClass:"article-area"},[e("article-content",{attrs:{article:this.article}}),this._v(" "),e("post-comments",{on:{getComments:this.getComments}}),this._v(" "),e("comments-list",{attrs:{commentsList:this.commentsList},on:{getComments:this.getComments}})],1)])])},staticRenderFns:[]};var k=i("VU/8")(g,w,!1,function(t){i("9yDs")},"data-v-05ff18a1",null);e.default=k.exports}});